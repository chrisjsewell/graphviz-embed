# This is a Cross.toml configuration file for cross-compiling Rust projects.
# We need to install Python 3.6+ on the aarch64-unknown-linux-gnu target before building,
# since the default cross-rs image is based on Ubuntu 16.04 which only has Python 3.5.
# The Graphviz build scripts (gen_version.py) require f-strings (Python 3.6+).
# We use the deadsnakes PPA to get Python 3.9.
[target.aarch64-unknown-linux-gnu]
pre-build = [
    """
    apt-get update && \
    apt-get install -y software-properties-common && \
    add-apt-repository -y ppa:deadsnakes/ppa && \
    apt-get update && \
    apt-get install -y python3.9 && \
    ln -sf /usr/bin/python3.9 /usr/bin/python3
    """
]
