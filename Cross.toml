# This is a Cross.toml configuration file for cross-compiling Rust projects.
# We need to install Python 3.6+ on the aarch64-unknown-linux-gnu target before building,
# since the default image either lacks Python or has an old version that doesn't support f-strings.
# The Graphviz build scripts (gen_version.py) require f-strings (Python 3.6+).
[target.aarch64-unknown-linux-gnu]
pre-build = [
    """
    apt-get update && \
    apt-get install -y software-properties-common && \
    add-apt-repository -y ppa:deadsnakes/ppa && \
    apt-get update && \
    apt-get install -y python3.9 && \
    update-alternatives --install /usr/bin/python3 python3 /usr/bin/python3.9 1
    """
]
